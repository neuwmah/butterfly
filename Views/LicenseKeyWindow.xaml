<Window x:Class="Butterfly.Views.LicenseKeyWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Height="700" 
        Width="700"
        WindowStartupLocation="CenterScreen"
        Background="#000000"
        ResizeMode="NoResize"
        WindowStyle="SingleBorderWindow">

    <Window.Resources>
        <Style x:Key="LicenseButton" TargetType="Button">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="30,12"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Opacity" Value="0.85"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Opacity" Value="0.7"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Opacity" Value="0.5"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <Style x:Key="LicenseTextBox" TargetType="TextBox">
            <Setter Property="Background" Value="#1A1A1A"/>
            <Setter Property="Foreground" Value="#AE81FF"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,0,0,0"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="CaretBrush" Value="Transparent"/>
            <Setter Property="SelectionBrush" Value="White"/>
            <Setter Property="SelectionTextBrush" Value="Black"/>
            <Setter Property="Cursor" Value="IBeam"/>
            <Setter Property="TextAlignment" Value="Left"/>
        </Style>
        
        <Style x:Key="LightningButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="Transparent"
                                BorderThickness="0"
                                Padding="0">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Background="#000000"
          MouseLeftButtonDown="Grid_MouseLeftButtonDown">
        <StackPanel HorizontalAlignment="Center"
                   VerticalAlignment="Center">
            
            <Image x:Name="AppIcon"
                   Width="64"
                   Height="64"
                   HorizontalAlignment="Center"
                   Margin="0,0,0,16"/>
            
            <TextBlock x:Name="StatusLabel"
                      Text="{DynamicResource License_PleaseEnterKey}"
                      Foreground="#888888"
                      FontFamily="Segoe UI"
                      FontSize="14"
                      HorizontalAlignment="Center"
                      TextWrapping="Wrap"
                      TextAlignment="Center"
                      MaxWidth="400"
                      Margin="0,0,0,16"/>
            
            <StackPanel Orientation="Horizontal"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       Margin="0,0,0,16">
                <Grid Width="300" Height="40">
                    <TextBox x:Name="LicenseKeyTextBox"
                            Style="{StaticResource LicenseTextBox}"
                            Width="300"
                            Height="40"
                            TextChanged="LicenseKeyTextBox_TextChanged"
                            KeyDown="LicenseKeyTextBox_KeyDown"
                            GotFocus="LicenseKeyTextBox_GotFocus"
                            LostFocus="LicenseKeyTextBox_LostFocus"/>
                    
                    <Rectangle x:Name="CustomCaret"
                              Width="1.5"
                              Height="14"
                              Fill="#AE81FF"
                              HorizontalAlignment="Left"
                              VerticalAlignment="Center"
                              Margin="13,0,0,0"
                              IsHitTestVisible="False"
                              Visibility="Collapsed">
                        <Rectangle.Triggers>
                            <EventTrigger RoutedEvent="Loaded">
                                <BeginStoryboard>
                                    <Storyboard RepeatBehavior="Forever">
                                        <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                                        From="1" To="0"
                                                        Duration="0:0:0.5"
                                                        AutoReverse="True"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                        </Rectangle.Triggers>
                    </Rectangle>
                </Grid>
                
                <Button x:Name="ActivateButton"
                       Width="28"
                       Height="28"
                       Click="ActivateButton_Click"
                       Margin="8,0,0,0"
                       Background="Transparent"
                       BorderThickness="0"
                       Cursor="Hand"
                       Padding="0"
                       VerticalAlignment="Center">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="Transparent"
                                    BorderThickness="0"
                                    Padding="4">
                                <Viewbox Width="20" Height="20"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center">
                                    <Canvas Width="24" Height="24">
                                        <Path x:Name="LightningIcon"
                                              Data="M13 2L3 14h8l-1 8 10-12h-8l1-8z"
                                              StrokeThickness="1.5"
                                              StrokeLineJoin="Round">
                                            <Path.Stroke>
                                                <SolidColorBrush x:Name="LightningStroke" Color="White"/>
                                            </Path.Stroke>
                                            <Path.Fill>
                                                <SolidColorBrush x:Name="LightningFill" Color="Transparent"/>
                                            </Path.Fill>
                                        </Path>
                                    </Canvas>
                                </Viewbox>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Trigger.EnterActions>
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <ColorAnimation Storyboard.TargetName="LightningFill"
                                                              Storyboard.TargetProperty="Color"
                                                              To="#AE81FF"
                                                              Duration="0:0:0.2">
                                                    <ColorAnimation.EasingFunction>
                                                        <QuadraticEase EasingMode="EaseInOut"/>
                                                    </ColorAnimation.EasingFunction>
                                                </ColorAnimation>
                                                <ColorAnimation Storyboard.TargetName="LightningStroke"
                                                              Storyboard.TargetProperty="Color"
                                                              To="#AE81FF"
                                                              Duration="0:0:0.2">
                                                    <ColorAnimation.EasingFunction>
                                                        <QuadraticEase EasingMode="EaseInOut"/>
                                                    </ColorAnimation.EasingFunction>
                                                </ColorAnimation>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </Trigger.EnterActions>
                                    <Trigger.ExitActions>
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <ColorAnimation Storyboard.TargetName="LightningFill"
                                                              Storyboard.TargetProperty="Color"
                                                              To="Transparent"
                                                              Duration="0:0:0.2">
                                                    <ColorAnimation.EasingFunction>
                                                        <QuadraticEase EasingMode="EaseInOut"/>
                                                    </ColorAnimation.EasingFunction>
                                                </ColorAnimation>
                                                <ColorAnimation Storyboard.TargetName="LightningStroke"
                                                              Storyboard.TargetProperty="Color"
                                                              To="White"
                                                              Duration="0:0:0.2">
                                                    <ColorAnimation.EasingFunction>
                                                        <QuadraticEase EasingMode="EaseInOut"/>
                                                    </ColorAnimation.EasingFunction>
                                                </ColorAnimation>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </Trigger.ExitActions>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </StackPanel>
            
            <TextBlock HorizontalAlignment="Center"
                      FontFamily="Segoe UI"
                      FontSize="14"
                      Foreground="#888888">
                <Run Text="{DynamicResource License_NeedKey}"/>
                <Hyperlink x:Name="DiscordLink"
                          NavigateUri="https://discord.com/users/1187937891075231864"
                          RequestNavigate="DiscordLink_RequestNavigate"
                          Foreground="#AE81FF">
                    <Run Text="{DynamicResource License_DiscordHandle}"/>
                </Hyperlink>
            </TextBlock>
        </StackPanel>
    </Grid>
</Window>
