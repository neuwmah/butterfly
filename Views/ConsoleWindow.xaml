<Window x:Class="Butterfly.Views.ConsoleWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Height="400" 
        Width="700"
        WindowStartupLocation="CenterScreen"
        Background="#000000"
        ResizeMode="CanResize"
        Focusable="True">

    <Window.Resources>
        
        <Style x:Key="PlayPauseButton" TargetType="Button">
            <Setter Property="Foreground" Value="#FFFFFF"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Width" Value="40"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="ButtonBorder"
                                BorderBrush="Transparent"
                                BorderThickness="0"
                                CornerRadius="0"
                                Padding="0"
                                Margin="0">
                            <Border.Background>
                                <SolidColorBrush x:Name="ButtonBackground">
                                    <SolidColorBrush.Color>
                                        <Color A="0" R="0" G="0" B="0"/>
                                    </SolidColorBrush.Color>
                                </SolidColorBrush>
                            </Border.Background>
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <EventTrigger RoutedEvent="Border.MouseEnter">
                                <BeginStoryboard>
                                    <Storyboard>
                                        <ColorAnimation Storyboard.TargetName="ButtonBackground"
                                                      Storyboard.TargetProperty="Color"
                                                      Duration="0:0:0.25">
                                            <ColorAnimation.To>
                                                <Color A="255" R="26" G="26" B="26"/>
                                            </ColorAnimation.To>
                                            <ColorAnimation.EasingFunction>
                                                <QuadraticEase EasingMode="EaseInOut"/>
                                            </ColorAnimation.EasingFunction>
                                        </ColorAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                            <EventTrigger RoutedEvent="Border.MouseLeave">
                                <BeginStoryboard>
                                    <Storyboard>
                                        <ColorAnimation Storyboard.TargetName="ButtonBackground"
                                                      Storyboard.TargetProperty="Color"
                                                      Duration="0:0:0.25">
                                            <ColorAnimation.To>
                                                <Color A="0" R="0" G="0" B="0"/>
                                            </ColorAnimation.To>
                                            <ColorAnimation.EasingFunction>
                                                <QuadraticEase EasingMode="EaseInOut"/>
                                            </ColorAnimation.EasingFunction>
                                        </ColorAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <ColorAnimation Storyboard.TargetName="ButtonBackground"
                                                          Storyboard.TargetProperty="Color"
                                                          Duration="0:0:0.1">
                                                <ColorAnimation.To>
                                                    <Color A="255" R="26" G="26" B="26"/>
                                                </ColorAnimation.To>
                                            </ColorAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        
        <Style TargetType="ScrollBar">
            <Setter Property="Background" Value="#1A1A1A"/>
            <Setter Property="Foreground" Value="#3E3E3E"/>
            <Setter Property="Width" Value="2"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollBar">
                        <Grid>
                            <Border Background="{TemplateBinding Background}" CornerRadius="0"/>
                            <Track x:Name="PART_Track" IsDirectionReversed="True">
                                <Track.Thumb>
                                    <Thumb>
                                        <Thumb.Style>
                                            <Style TargetType="Thumb">
                                                <Setter Property="Background" Value="#3E3E3E"/>
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Thumb">
                                                            <Border Background="{TemplateBinding Background}" 
                                                                    CornerRadius="0" 
                                                                    Margin="1"/>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background" Value="#515151"/>
                                                    </Trigger>
                                                    <Trigger Property="IsDragging" Value="True">
                                                        <Setter Property="Background" Value="#6B6B6B"/>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Thumb.Style>
                                    </Thumb>
                                </Track.Thumb>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="48"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        
        <Border Grid.Row="0" 
                Background="#000000" 
                BorderBrush="#1A1A1A"
                BorderThickness="0,1,0,1"
                Height="1">
        </Border>

        
        <Border Grid.Row="1"
                Background="#000000"
                BorderBrush="#1A1A1A"
                BorderThickness="0,0,0,1">
            <TextBlock Text="{DynamicResource Console_Title}"
                       Foreground="#FFFFFF"
                       FontSize="12"
                       FontWeight="Bold"
                       FontFamily="Segoe UI"
                       VerticalAlignment="Center"
                       Margin="16,0,0,0"/>
        </Border>

                
        <ScrollViewer Grid.Row="2"
                        x:Name="ConsoleScrollViewer"
                        VerticalScrollBarVisibility="Auto"
                        HorizontalScrollBarVisibility="Disabled"
                        Background="#000000"
                        PanningMode="VerticalOnly"
                        CanContentScroll="True">
            <TextBox x:Name="ConsoleOutput"
                        FontFamily="Consolas"
                        FontSize="12"
                        Foreground="#CCCCCC"
                        TextWrapping="Wrap"
                        Margin="16,16,16,4"
                        IsReadOnly="True"
                        Background="Transparent"
                        BorderThickness="0"
                        SelectionBrush="#ae81ff"
                        VerticalScrollBarVisibility="Disabled"
                        HorizontalScrollBarVisibility="Disabled"
                        Text=""/>
        </ScrollViewer>

                
        <Border Grid.Row="3"
                Background="#000000"
                BorderBrush="#1A1A1A"
                BorderThickness="0,1,0,0"
                Height="40">
            <Grid Margin="0,0,16,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                
                <Button Grid.Column="0"
                        x:Name="PlayPauseButton"
                        Style="{StaticResource PlayPauseButton}"
                        Click="PlayPauseButton_Click"
                        Padding="0"
                        Margin="0"
                        HorizontalContentAlignment="Stretch"
                        VerticalContentAlignment="Stretch"
                        ToolTip="{DynamicResource ToolTip_StartPause}">
                    <Viewbox Width="14" Height="14" x:Name="PlayPauseIcon">
                        
                        <Canvas Width="24" Height="24">
                            <Path x:Name="PlayIcon" 
                                    Data="M8,5.14V19.14L19,12.14L8,5.14Z" 
                                    Fill="#AE81FF"
                                    Opacity="1"/>
                            <Path x:Name="PauseIcon" 
                                    Data="M14,19H18V5H14M6,19H10V5H6V19Z" 
                                    Fill="#AE81FF"
                                    Opacity="0"/>
                        </Canvas>
                    </Viewbox>
                </Button>

                
                <Rectangle Grid.Column="1"
                            Width="1"
                            VerticalAlignment="Stretch"
                            Stroke="#1A1A1A"
                            Margin="0"/>

                
                <Button Grid.Column="2"
                        x:Name="RefreshButton"
                        Style="{StaticResource PlayPauseButton}"
                        Click="RefreshButton_Click"
                        Padding="0"
                        Margin="0"
                        HorizontalContentAlignment="Stretch"
                        VerticalContentAlignment="Stretch"
                        ToolTip="{DynamicResource ToolTip_RefreshOnce}">
                    <Viewbox Width="14" Height="14">
                        
                        <Canvas Width="24" Height="24">
                            <Path Data="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z" 
                                    Fill="#AE81FF"/>
                        </Canvas>
                    </Viewbox>
                </Button>

                
                <Rectangle Grid.Column="3"
                            Width="1"
                            VerticalAlignment="Stretch"
                            Stroke="#1A1A1A"
                            Margin="0,0,16,0"/>

                <TextBlock Grid.Column="4"
                            Text=">"
                            FontFamily="Consolas"
                            FontSize="11"
                            Foreground="#AE81FF"
                            VerticalAlignment="Center"
                            Margin="0,0,8,0"/>

                <Grid Grid.Column="5">
                    <TextBox x:Name="ConsoleInput"
                                FontFamily="Consolas"
                                FontSize="12"
                                Foreground="#CCCCCC"
                                Background="Transparent"
                                BorderThickness="0"
                                CaretBrush="Transparent"
                                VerticalAlignment="Center"
                                KeyDown="ConsoleInput_KeyDown" 
                                TextChanged="ConsoleInput_TextChanged"/>
                    
                    
                    <Rectangle x:Name="CustomCaret"
                                Width="1.5"
                                Height="14"
                                Fill="#AE81FF"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Center"
                                Margin="2,0,0,0"
                                IsHitTestVisible="False">
                        <Rectangle.Triggers>
                            <EventTrigger RoutedEvent="Loaded">
                                <BeginStoryboard>
                                    <Storyboard RepeatBehavior="Forever">
                                        <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                                        From="1" To="0"
                                                        Duration="0:0:0.5"
                                                        AutoReverse="True"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                        </Rectangle.Triggers>
                    </Rectangle>
                </Grid>
            </Grid>
        </Border>
    </Grid>
    
</Window>
